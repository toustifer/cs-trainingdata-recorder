<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>CS2 Data Reaper - Industrial Edition</title>
    <style>
        :root { --bg: #121212; --surface: #1e1e1e; --primary: #ff9800; --accent: #2196f3; --text: #e0e0e0; }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; padding: 0; display: flex; height: 100vh; overflow: hidden; }
        
        .sidebar { width: 350px; background: #181818; border-right: 1px solid #333; display: flex; flex-direction: column; }
        .sidebar-header { padding: 15px; background: #222; border-bottom: 1px solid #333; font-weight: bold; color: var(--primary); }
        #file-list { flex: 1; overflow-y: auto; padding: 0; }
        .file-item { padding: 10px 15px; border-bottom: 1px solid #2a2a2a; font-size: 13px; cursor: pointer; user-select: none; transition: all 0.2s; }
        .file-item:hover { background: #252525; }
        .file-item.selected { background: #2a4a6a; border-left: 3px solid var(--accent); }
        .file-item.all-files { font-weight: bold; color: var(--primary); background: #222; }
        .file-item.all-files.selected { background: #3a3a0a; border-left-color: var(--primary); }
        .file-name { color: #fff; display: block; margin-bottom: 4px; word-break: break-all; }
        .file-status { color: #888; font-size: 11px; }
        .file-players { margin-top: 5px; color: #aaa; font-size: 11px; line-height: 1.4; padding-left: 8px; border-left: 2px solid var(--accent); display: none; }
        .file-players.visible { display: block; }
        .file-players div { padding: 2px 4px; cursor: pointer; transition: background 0.2s; border-radius: 2px; }
        .file-players div:hover { background: #333; color: #fff; }
        .file-players div:active { background: var(--accent); }
        
        .main-content { flex: 1; display: flex; flex-direction: column; padding: 20px; overflow: hidden; min-width: 0; }
        
        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--primary); padding-bottom: 10px; margin-bottom: 20px; flex-shrink: 0; }
        .title { font-size: 24px; font-weight: bold; color: var(--primary); }
        .card { background: var(--surface); padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.3); margin-bottom: 20px; flex-shrink: 0; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-size: 12px; color: #888; text-transform: uppercase; }
        .row { display: flex; gap: 10px; }
        input { flex: 1; background: #2a2a2a; border: 1px solid #444; color: #fff; padding: 8px; border-radius: 4px; outline: none; }
        button { background: var(--accent); border: none; color: white; padding: 8px 15px; border-radius: 4px; cursor: pointer; }
        button.primary { background: var(--primary); font-weight: bold; width: 100%; padding: 15px; font-size: 18px; }
        button.secondary { background: var(--accent); font-weight: bold; width: 100%; padding: 12px; font-size: 14px; margin-bottom: 10px; }
        #log { flex: 1; background: #000; color: #00ff00; font-family: 'Consolas', monospace; padding: 15px; border-radius: 4px; overflow-y: auto; white-space: pre-wrap; font-size: 12px; border: 1px solid #333; min-height: 0; }
        .progress-container { width: 100%; background: #333; height: 10px; border-radius: 5px; margin-top: 5px; overflow: hidden; flex-shrink: 0; }
        #progress-bar { width: 0%; height: 100%; background: var(--primary); transition: width 0.3s; }
        
        /* ç®€å•çš„å¤åˆ¶åé¦ˆæç¤º */
        .copy-toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: var(--primary); color: #000; padding: 5px 15px; border-radius: 20px; font-weight: bold; font-size: 12px; z-index: 1000; opacity: 0; transition: opacity 0.3s; pointer-events: none; }
        
        .data-list { max-height: 200px; overflow-y: auto; background: #111; border: 1px solid #333; border-radius: 4px; margin-top: 10px; }
        .data-item { padding: 8px 12px; border-bottom: 1px solid #222; font-size: 12px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: background 0.2s; }
        .data-item:hover { background: #252525; }
        .data-item .name { font-weight: bold; color: #fff; }
        .data-item .time { color: #666; font-size: 11px; }
        .data-item .action { color: var(--accent); }
    </style>
</head>
<body>
    <div id="toast" class="copy-toast">å·²å¤åˆ¶å¹¶å¡«å…¥ Steam ID</div>
    
    <div class="sidebar">
        <div class="sidebar-header">Demo æ–‡ä»¶åˆ—è¡¨</div>
        <div id="file-list">
            <div style="padding:15px; color:#666; text-align:center;">è¯·é€‰æ‹© Demo ç›®å½•</div>
        </div>
    </div>

    <div class="main-content">
        <div class="header">
            <div class="title">CS2 DATA REAPER <span style="color: #fff; font-size: 14px; margin-left: 10px;">Dual Mode</span></div>
            <button onclick="openConfigFolder()" style="font-size: 12px;">æ‰“å¼€é…ç½®æ–‡ä»¶å¤¹</button>
        </div>

        <div class="card">
            <div class="grid">
                <div class="input-group"><label>Demo æ€»ç›®å½•</label><div class="row"><input type="text" id="demoDir"><button onclick="window.selectDir('demoDir')">æµè§ˆ</button></div></div>
                <div class="input-group"><label>è¾“å‡ºä¸»ç›®å½•</label><div class="row"><input type="text" id="outputDir"><button onclick="window.selectDir('outputDir')">æµè§ˆ</button></div></div>
            </div>
            <div class="grid">
                <div class="input-group"><label>æ•°æ®åº“å¯†ç </label><input type="password" id="dbPass" value="88683139"></div>
                <div class="input-group"><label>å›åˆå· (ä¾‹å¦‚: 1,2,3 æˆ–ç•™ç©ºä¸ºå…¨éƒ¨)</label><input type="text" id="rounds" placeholder="1,2,3,4..."></div>
            </div>
            <div class="grid">
                <div class="input-group"><label>ç©å®¶ Steam ID (å¯é€‰)</label><input type="text" id="steamId"></div>
                <div class="input-group"><label>å½•åˆ¶å€é€Ÿ (é»˜è®¤ 8)</label><input type="number" id="speed" value="8"></div>
                <div class="input-group"><label>æ¯çª—å£å¸§æ•° (é»˜è®¤ 10)</label><input type="number" id="framesPerWindow" value="10" min="2" max="30"></div>
            </div>
            <div style="margin: 10px 0; padding: 8px; background: #1a1a2e; border-radius: 4px;">
                <label style="display: flex; align-items: center; cursor: pointer; color: #ff6b6b;">
                    <input type="checkbox" id="forceReanalyze" style="margin-right: 8px; width: 18px; height: 18px;">
                    <span>å¼ºåˆ¶é‡æ–°å¯¼å‡ºè®­ç»ƒçª—å£ (è¦†ç›–æ•°æ®åº“ä¸­å·²æœ‰æ•°æ®)</span>
                </label>
            </div>
            
            <div class="grid" style="grid-template-columns: 1fr 1.5fr 0.8fr;">
                <button class="secondary" id="analyzeBtn" onclick="window.startAnalysis()">1. åˆ†æå…¥åº“</button>
                <button class="primary" id="startBtn" onclick="window.startHarvest()">2. å¯åŠ¨å½•åˆ¶æ”¶å‰²</button>
                <button class="secondary" style="background: #4caf50;" onclick="window.startVisualize()">3. å¯è§†åŒ–(é…ç½®)</button>
            </div>
        </div>

        <!-- æ–°å¢ï¼šé€‰æ‹©æ–‡ä»¶å¤¹æ’­æ”¾æŒ‰é’® -->
        <div class="card" style="padding: 15px; margin-bottom: 10px;">
            <button onclick="window.selectFolderToVisualize()" style="width: 100%; padding: 12px; font-size: 14px; background: linear-gradient(135deg, #4a9eff, #6c5ce7); border: none; border-radius: 6px; cursor: pointer; color: white;">
                ğŸ“ é€‰æ‹©æ–‡ä»¶å¤¹æ’­æ”¾è®­ç»ƒæ•°æ®
            </button>
        </div>

        <!-- æ—¥å¿—æ§åˆ¶æŒ‰é’® -->
        <div style="display: flex; gap: 10px; margin-bottom: 5px;">
            <button onclick="window.clearLog()" style="padding: 6px 12px; font-size: 12px; background: #333; border: 1px solid #555; border-radius: 4px; cursor: pointer; color: #aaa;">
                ğŸ—‘ï¸ æ¸…é™¤æ—¥å¿—
            </button>
            <button onclick="window.copyLog()" style="padding: 6px 12px; font-size: 12px; background: #333; border: 1px solid #555; border-radius: 4px; cursor: pointer; color: #aaa;">
                ğŸ“‹ å¤åˆ¶æ—¥å¿—
            </button>
        </div>

        <div id="log">ç­‰å¾…ä»»åŠ¡æŒ‡ä»¤...</div>
        <div class="progress-container"><div id="progress-bar"></div></div>
    </div>

    <script>
        const { ipcRenderer } = require('electron');
        const path = require('path');

        console.log("Script loaded successfully");

        let selectedFile = null; // null è¡¨ç¤ºé€‰æ‹©å…¨éƒ¨ï¼Œå¦åˆ™ä¸ºå…·ä½“æ–‡ä»¶è·¯å¾„

        // æ˜¾å¼æŒ‚è½½åˆ° window å¯¹è±¡ï¼Œç¡®ä¿ HTML onclick èƒ½æ‰¾åˆ°
        window.selectDir = async function(id) {
            console.log("selectDir called for " + id);
            const dirPath = await ipcRenderer.invoke('select-dir');
            if (dirPath) {
                document.getElementById(id).value = dirPath;
                if (id === 'demoDir') {
                    window.refreshDemoList(dirPath);
                }
            }
        };

        window.refreshDataList = async function(dirPath) {
            if (!dirPath) dirPath = document.getElementById('outputDir').value;
            if (!dirPath) return;

            const listEl = document.getElementById('data-list');
            listEl.innerHTML = '<div style="padding:10px; color:#888; text-align:center;">æ‰«æä¸­...</div>';

            const folders = await ipcRenderer.invoke('scan-training-data', dirPath);
            listEl.innerHTML = '';

            if (folders.length === 0) {
                listEl.innerHTML = '<div style="padding:10px; color:#888; text-align:center;">è¯¥ç›®å½•ä¸‹æš‚æ— è®­ç»ƒæ•°æ®</div>';
                return;
            }

            folders.forEach(f => {
                const item = document.createElement('div');
                item.className = 'data-item';
                const dateStr = new Date(f.mtime).toLocaleString();
                item.innerHTML = `
                    <span class="name">${f.name}</span>
                    <div>
                        <span class="time">${dateStr}</span>
                        <span class="action">â–¶ æ’­æ”¾</span>
                    </div>
                `;
                item.onclick = () => window.visualizeFolder(f.path);
                listEl.appendChild(item);
            });
        };

        window.visualizeFolder = function(folderPath) {
            window.appendLog(`\n>>> è¯·æ±‚æ’­æ”¾æ•°æ®: ${folderPath}\n`);
            ipcRenderer.send('start-visualization', { targetFolder: folderPath });
        };

        window.selectFolderToVisualize = async function() {
            const folderPath = await ipcRenderer.invoke('select-dir');
            if (folderPath) {
                window.visualizeFolder(folderPath);
            }
        };

        window.refreshDemoList = async function(dirPath) {
            const listEl = document.getElementById('file-list');
            listEl.innerHTML = '<div style="padding:15px; color:#888;">æ‰«æä¸­...</div>';

            const demos = await ipcRenderer.invoke('scan-demos', dirPath);
            listEl.innerHTML = '';

            // æ·»åŠ "å…¨éƒ¨"é€‰é¡¹
            const allItem = document.createElement('div');
            allItem.className = 'file-item all-files selected';
            allItem.dataset.path = 'ALL';
            allItem.innerHTML = `
                <span class="file-name">âœ“ å…¨éƒ¨æ–‡ä»¶</span>
                <span class="file-status">ç‚¹å‡»ä¸‹æ–¹æ–‡ä»¶å¯å•ç‹¬é€‰æ‹©</span>
            `;
            allItem.onclick = () => window.selectFileItem(allItem, null);
            listEl.appendChild(allItem);

            if (demos.length === 0) {
                const emptyDiv = document.createElement('div');
                emptyDiv.style.cssText = 'padding:15px; color:#888; text-align:center;';
                emptyDiv.innerText = 'æœªæ‰¾åˆ° .dem æ–‡ä»¶';
                listEl.appendChild(emptyDiv);
                return;
            }

            demos.forEach(filePath => {
                const fileName = filePath.split(/[\\/]/).pop();
                const item = document.createElement('div');
                item.className = 'file-item';
                item.id = 'file-' + Buffer.from(filePath).toString('base64').replace(/[+/=]/g, '');
                item.dataset.path = filePath;
                item.innerHTML = `
                    <span class="file-name">${fileName}</span>
                    <span class="file-status">ç­‰å¾…æ£€æŸ¥...</span>
                    <div class="file-players"></div>
                `;
                item.onclick = () => window.selectFileItem(item, filePath);
                listEl.appendChild(item);
            });

            // è‡ªåŠ¨è§¦å‘æ‰¹é‡åå°æ£€æŸ¥
            const config = {
                files: demos,
                dbUser: 'postgres',
                dbPass: document.getElementById('dbPass').value
            };
            ipcRenderer.send('quick-scan-players', config);
        };

        window.selectFileItem = function(itemEl, filePath) {
            // ç§»é™¤æ‰€æœ‰é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.file-item').forEach(el => el.classList.remove('selected'));
            // æ·»åŠ å½“å‰é€‰ä¸­
            itemEl.classList.add('selected');
            selectedFile = filePath; // null è¡¨ç¤ºå…¨éƒ¨

            // æ›´æ–°UIæç¤º
            if (filePath === null) {
                window.appendLog('\n[å·²é€‰æ‹©] å…¨éƒ¨æ–‡ä»¶\n');
            } else {
                const fileName = filePath.split(/[\\/]/).pop();
                window.appendLog(`\n[å·²é€‰æ‹©] ${fileName}\n`);
            }
        };

        window.openConfigFolder = async function() {
            await ipcRenderer.invoke('open-config-folder');
        };

        window.appendLog = function(text) {
            const log = document.getElementById('log');
            log.innerText += text;
            log.scrollTop = log.scrollHeight;
            if (text.includes('[')) {
                const match = text.match(/\['.*?(\d+)\/(\d+)\]/);
                if (match) document.getElementById('progress-bar').style.width = (parseInt(match[1])/parseInt(match[2])*100) + '%';
            }
        };

        window.clearLog = function() {
            document.getElementById('log').innerText = 'æ—¥å¿—å·²æ¸…é™¤\n';
            document.getElementById('progress-bar').style.width = '0%';
        };

        window.copyLog = function() {
            const logText = document.getElementById('log').innerText;
            try {
                // ä½¿ç”¨ Electron çš„ clipboard æ¨¡å—
                const { clipboard } = require('electron');
                clipboard.writeText(logText);

                // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
                const btn = event.target;
                const originalText = btn.innerText;
                btn.innerText = 'âœ“ å·²å¤åˆ¶';
                btn.style.background = '#2e7d32';
                setTimeout(() => {
                    btn.innerText = originalText;
                    btn.style.background = '#333';
                }, 1500);
            } catch (err) {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                // å¤‡ç”¨æ–¹æ¡ˆï¼šåˆ›å»ºä¸´æ—¶æ–‡æœ¬æ¡†
                const textarea = document.createElement('textarea');
                textarea.value = logText;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            }
        };

        window.startAnalysis = function() {
            console.log("startAnalysis clicked");
            const demoDir = document.getElementById('demoDir').value;
            const rounds = document.getElementById('rounds').value.trim();
            const forceReanalyze = document.getElementById('forceReanalyze').checked;

            const config = {
                demoDir: demoDir,
                selectedFile: selectedFile, // null=å…¨éƒ¨ï¼Œå¦åˆ™ä¸ºå…·ä½“æ–‡ä»¶è·¯å¾„
                rounds: rounds, // å¯èƒ½ä¸ºç©ºå­—ç¬¦ä¸²
                dbUser: 'postgres',
                dbPass: document.getElementById('dbPass').value,
                forceReanalyze: forceReanalyze
            };

            document.getElementById('analyzeBtn').disabled = true;

            if (selectedFile === null) {
                window.appendLog("\n>>> å¼€å§‹æ‰¹é‡åˆ†ææ‰€æœ‰æ–‡ä»¶...\n");
            } else {
                const fileName = selectedFile.split(/[\\/]/).pop();
                window.appendLog(`\n>>> å¼€å§‹åˆ†æå•ä¸ªæ–‡ä»¶: ${fileName}\n`);
                if (rounds) {
                    window.appendLog(`>>> æŒ‡å®šå›åˆ: ${rounds}\n`);
                }
            }

            // é‡ç½®çŠ¶æ€
            document.querySelectorAll('.file-status').forEach(el => {
                if (!el.closest('.all-files')) {
                    el.innerText = 'ç­‰å¾…å¤„ç†';
                }
            });
            document.querySelectorAll('.file-players').forEach(el => {
                el.innerHTML = '';
                el.classList.remove('visible');
            });

            ipcRenderer.send('start-analysis', config);
        };

        window.startHarvest = async function() {
            console.log("startHarvest clicked");
            const rounds = document.getElementById('rounds').value.trim();
            const forceReanalyze = document.getElementById('forceReanalyze').checked;

            const config = {
                demoDir: document.getElementById('demoDir').value,
                outputDir: document.getElementById('outputDir').value,
                playerSteamId: document.getElementById('steamId').value,
                selectedFile: selectedFile, // null=å…¨éƒ¨ï¼Œå¦åˆ™ä¸ºå…·ä½“æ–‡ä»¶è·¯å¾„
                rounds: rounds,
                dbUser: 'postgres',
                dbPass: document.getElementById('dbPass').value,
                speed: document.getElementById('speed').value,
                framesPerWindow: document.getElementById('framesPerWindow').value,
                forceReanalyze: forceReanalyze
            };

            await ipcRenderer.invoke('save-config', config);
            document.getElementById('startBtn').disabled = true;

            if (selectedFile === null) {
                window.appendLog("\n>>> å¯åŠ¨æ‰¹é‡å½•åˆ¶æ”¶å‰²æµç¨‹ï¼ˆæ‰€æœ‰æ–‡ä»¶ï¼‰...\n");
            } else {
                const fileName = selectedFile.split(/[\\/]/).pop();
                window.appendLog(`\n>>> å¯åŠ¨å•æ–‡ä»¶å½•åˆ¶: ${fileName}\n`);
                if (rounds) {
                    window.appendLog(`>>> æŒ‡å®šå›åˆ: ${rounds}\n`);
                }
            }

            ipcRenderer.send('start-process', config);
        };

        window.startVisualize = function() {
            const rounds = document.getElementById('rounds').value.trim();
            const steamId = document.getElementById('steamId').value.trim();

            if (!selectedFile || selectedFile === 'ALL') {
                window.appendLog('\n[æç¤º] å¯è§†åŒ–åªèƒ½é’ˆå¯¹å•ä¸ªæ–‡ä»¶ã€‚è¯·å…ˆåœ¨å·¦ä¾§é€‰æ‹©ä¸€ä¸ª Demoã€‚\n');
                return;
            }
            if (!steamId) {
                window.appendLog('\n[æç¤º] è¯·å¡«å†™è¦å¯è§†åŒ–çš„ç©å®¶ Steam IDã€‚\n');
                return;
            }
            if (!rounds) {
                window.appendLog('\n[æç¤º] è¯·å¡«å†™å…·ä½“çš„ä¸€ä¸ªå›åˆå· (ä¾‹å¦‚: 1)ã€‚\n');
                return;
            }

            const config = {
                outputDir: document.getElementById('outputDir').value,
                selectedFile: selectedFile,
                playerSteamId: steamId,
                rounds: rounds
            };

            window.appendLog(`\n>>> æ­£åœ¨å¯åŠ¨å¯è§†åŒ–å·¥å…·...\n`);
            ipcRenderer.send('start-visualization', config);
        };

        window.showToast = function(text) {
            const toast = document.getElementById('toast');
            toast.innerText = text;
            toast.style.opacity = '1';
            setTimeout(() => toast.style.opacity = '0', 2000);
        };

        window.copyToClipboard = async function(text) {
            try {
                // å¦‚æœæ ¼å¼æ˜¯ "Name [ID]"ï¼Œæˆ‘ä»¬åªå¤åˆ¶ ID åˆ°å‰ªè´´æ¿ï¼Œè¿˜æ˜¯å¤åˆ¶æ•´è¡Œï¼Ÿ
                // é€šå¸¸ç”¨æˆ·ç‚¹å‡»æ˜¯ä¸ºäº†å¡«å…¥ï¼Œæ‰€ä»¥æœ€å¥½æå– IDã€‚
                // 1. å°è¯•æå– [12345] ä¸­çš„ ID
                let idToFill = text;
                const bracketMatch = text.match(/\[(\d{17})\]/);
                if (bracketMatch) {
                    idToFill = bracketMatch[1];
                }

                // å¤åˆ¶åˆ°å‰ªè´´æ¿
                await navigator.clipboard.writeText(idToFill);
                
                // 2. å°è¯•æå– Steam ID (é€šå¸¸æ˜¯ 17 ä½æ•°å­—)
                const steamIdMatch = idToFill.match(/\d{17}/);
                if (steamIdMatch) {
                    document.getElementById('steamId').value = steamIdMatch[0];
                    window.showToast(`å·²å¡«å…¥ ID: ${steamIdMatch[0]}`);
                } else {
                    window.showToast(`å·²å¤åˆ¶æ–‡æœ¬`);
                }
            } catch (err) {
                console.error('Failed to copy: ', err);
            }
        };

        window.onload = async () => {
            console.log("Window loaded");
            const savedConfig = await ipcRenderer.invoke('load-config');
            if (savedConfig) {
                document.getElementById('demoDir').value = savedConfig.demoDir || '';
                if (savedConfig.demoDir) window.refreshDemoList(savedConfig.demoDir);
                
                document.getElementById('outputDir').value = savedConfig.outputDir || '';

                document.getElementById('steamId').value = savedConfig.playerSteamId || '';
                document.getElementById('speed').value = savedConfig.speed || '8';
                document.getElementById('framesPerWindow').value = savedConfig.framesPerWindow || '10';
                document.getElementById('dbPass').value = savedConfig.dbPass || '88683139';
            }
        };

        ipcRenderer.on('process-log', (e, d) => window.appendLog(d));
        ipcRenderer.on('process-complete', (e, c) => {
            document.getElementById('analyzeBtn').disabled = false;
            document.getElementById('startBtn').disabled = false;
            window.appendLog("\n>>> ä»»åŠ¡ç»“æŸã€‚");
        });

        // æ–°å¢ï¼šç›‘å¬å•ä¸ªæ–‡ä»¶çŠ¶æ€æ›´æ–°
        ipcRenderer.on('file-status-update', (e, { file, status, players, rounds }) => {
            // Find item by path matches
            const items = document.querySelectorAll('.file-item');
            for (let item of items) {
                if (item.dataset.path === file) {
                    if (status) {
                        let statusHtml = status;
                        if (rounds) {
                            statusHtml += ` <span style="background:#333; color:var(--primary); padding:1px 5px; border-radius:3px; margin-left:5px; font-weight:bold;">${rounds} å›åˆ</span>`;
                        }
                        item.querySelector('.file-status').innerHTML = statusHtml;
                    }
                    if (players && players.length > 0) {
                        const playerEl = item.querySelector('.file-players');
                        playerEl.innerHTML = players.map(p => `<div onclick="window.copyToClipboard(this.innerText)">${p}</div>`).join('');
                        playerEl.classList.add('visible');
                    }
                    // Auto scroll to this item (only if it's not the initial batch load which might be annoying)
                    // item.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    break;
                }
            }
        });

    </script>
</body>
</html>